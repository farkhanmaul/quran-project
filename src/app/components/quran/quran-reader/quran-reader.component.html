<div class="quran-reader-container" [class]="'font-' + fontSize + ' arabic-' + arabicFont">
  <!-- Loading State -->
  <div *ngIf="loading" class="loading-container">
    <div class="loading-spinner"></div>
    <p>Loading Surah...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error" class="error-container">
    <p>{{ error }}</p>
    <button (click)="loadSurah()" class="retry-btn">Retry</button>
  </div>

  <!-- Main Content -->
  <div *ngIf="!loading && !error && surah" class="reader-content">
    <!-- Surah Header -->
    <div class="surah-header">
      <div class="surah-info">
        <h1 class="surah-name-arabic">{{ surah.name }}</h1>
        <h2 class="surah-name-english">{{ surah.englishName }}</h2>
        <p class="surah-translation">{{ surah.englishNameTranslation }}</p>
        <div class="surah-meta">
          <span class="revelation-type">{{ surah.revelationType }}</span>
          <span class="ayah-count">{{ surah.numberOfAyahs }} Ayahs</span>
        </div>
      </div>
      
      <!-- Reader Controls -->
      <div class="reader-controls">
        <div class="font-controls">
          <button (click)="decreaseFontSize()" [disabled]="fontSize === 'small'" title="Decrease font size">
            <i class="icon-minus"></i>
          </button>
          <span class="font-size-label">{{ fontSize }}</span>
          <button (click)="increaseFontSize()" [disabled]="fontSize === 'extra-large'" title="Increase font size">
            <i class="icon-plus"></i>
          </button>
        </div>
        
        <div class="display-controls">
          <button (click)="toggleTranslation()" [class.active]="showTranslation" title="Toggle translation">
            Translation
          </button>
          <button (click)="toggleTransliteration()" [class.active]="showTransliteration" title="Toggle transliteration">
            Transliteration
          </button>
        </div>
        
        <div class="audio-controls">
          <button (click)="toggleAudio()" [class.playing]="isPlaying" title="Play/Pause audio">
            <i [class]="isPlaying ? 'icon-pause' : 'icon-play'"></i>
          </button>
        </div>
      </div>
    </div>

    <!-- Bismillah (except for At-Tawbah) -->
    <div *ngIf="surah.number !== 9 && surah.number !== 1" class="bismillah">
      <p class="arabic-text">بِسْمِ اللَّهِ الرَّحْمَٰنِ الرَّحِيمِ</p>
      <p *ngIf="showTranslation" class="translation">In the name of Allah, the Entirely Merciful, the Especially Merciful.</p>
    </div>

    <!-- Ayahs Container -->
    <div class="ayahs-container">
      <div *ngFor="let ayah of surah.ayahs" class="ayah-card" [class.current]="currentAyah === ayah.number">
        <div class="ayah-header">
          <span class="ayah-number">{{ ayah.number }}</span>
          <div class="ayah-actions">
            <button (click)="bookmarkAyah(ayah.number)" title="Bookmark this ayah">
              <i class="icon-bookmark"></i>
            </button>
            <button (click)="shareAyah(ayah.number)" title="Share this ayah">
              <i class="icon-share"></i>
            </button>
          </div>
        </div>
        
        <div class="ayah-content">
          <p class="arabic-text">{{ ayah.text }}</p>
          
          <p *ngIf="showTransliteration && ayah.transliteration" class="transliteration">
            {{ ayah.transliteration }}
          </p>
          
          <p *ngIf="showTranslation" class="translation">
            {{ ayah.translation }}
          </p>
        </div>
      </div>
    </div>

    <!-- Navigation Controls -->
    <div class="navigation-controls">
      <button (click)="previousSurah()" [disabled]="surahNumber === 1" class="nav-btn prev-btn">
        <i class="icon-chevron-left"></i>
        <span>Previous Surah</span>
      </button>
      
      <div class="surah-selector">
        <select [(ngModel)]="surahNumber" (change)="loadSurah()">
          <option *ngFor="let i of [].constructor(114); let idx = index" [value]="idx + 1">
            {{ idx + 1 }}. Surah {{ idx + 1 }}
          </option>
        </select>
      </div>
      
      <button (click)="nextSurah()" [disabled]="surahNumber === 114" class="nav-btn next-btn">
        <span>Next Surah</span>
        <i class="icon-chevron-right"></i>
      </button>
    </div>

    <!-- Reading Progress -->
    <div class="progress-indicator">
      <div class="progress-bar">
        <div class="progress-fill" [style.width.%]="(surahNumber / 114) * 100"></div>
      </div>
      <span class="progress-text">Surah {{ surahNumber }} of 114</span>
    </div>
  </div>
</div>